{
	"info": {
		"_postman_id": "a1b2c3d4-0001-0001-0001-000000000001",
		"name": "ContractOS — Demo & Integration Suite",
		"description": "ContractOS contract intelligence API demo.\n\nFlow: Health Check → Upload Document → Explore → Ask Questions",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Health Check",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://127.0.0.1:8742/health",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["health"]
				},
				"description": "Verify the ContractOS server is running."
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Server is running', function () {",
							"    pm.response.to.have.status(200);",
							"    var body = pm.response.json();",
							"    pm.expect(body.status).to.eql('ok');",
							"    console.log('Server OK — version ' + body.version);",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "2. Get Server Config",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://127.0.0.1:8742/config",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["config"]
				},
				"description": "View current server configuration (LLM provider, model, storage)."
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Config retrieved', function () {",
							"    pm.response.to.have.status(200);",
							"    var cfg = pm.response.json();",
							"    console.log('LLM: ' + cfg.llm_provider + '/' + cfg.llm_model);",
							"    console.log('Storage: ' + cfg.storage_backend);",
							"    console.log('Pipeline: ' + cfg.extraction_pipeline.join(' → '));",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "3. Upload Contract (select file →)",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "file",
							"type": "file",
							"src": [],
							"description": "Click 'Select Files' to pick a .docx or .pdf"
						}
					]
				},
				"url": {
					"raw": "http://127.0.0.1:8742/contracts/upload",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["contracts", "upload"]
				},
				"description": "Upload a contract document for indexing.\n\nHOW TO USE:\n1. Click Body tab\n2. Click 'Select Files' next to the file field\n3. Choose a .docx or .pdf from your computer\n4. Click Send\n\nCopy the document_id from the response — you need it for all subsequent requests."
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Contract indexed', function () {",
							"    pm.response.to.have.status(201);",
							"    var body = pm.response.json();",
							"    pm.collectionVariables.set('document_id', body.document_id);",
							"    console.log('Document ID: ' + body.document_id);",
							"    console.log('Title: ' + body.title);",
							"    console.log('Facts: ' + body.fact_count + ' | Clauses: ' + body.clause_count + ' | Bindings: ' + body.binding_count);",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "4. Get Contract Metadata",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://127.0.0.1:8742/contracts/{{document_id}}",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["contracts", "{{document_id}}"]
				},
				"description": "View contract metadata — parties, fact count, clause count."
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Metadata retrieved', function () {",
							"    pm.response.to.have.status(200);",
							"    var body = pm.response.json();",
							"    console.log('Title: ' + body.title);",
							"    console.log('Parties: ' + JSON.stringify(body.parties));",
							"    console.log('Facts: ' + body.fact_count + ' | Clauses: ' + body.clause_count);",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "5. View Extracted Facts",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://127.0.0.1:8742/contracts/{{document_id}}/facts?limit=20",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["contracts", "{{document_id}}", "facts"],
					"query": [
						{"key": "limit", "value": "20"}
					]
				},
				"description": "View extracted facts. Add ?fact_type=entity or ?fact_type=text_span to filter."
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Facts retrieved', function () {",
							"    pm.response.to.have.status(200);",
							"    var facts = pm.response.json();",
							"    console.log('Found ' + facts.length + ' facts');",
							"    facts.slice(0, 5).forEach(function(f) {",
							"        console.log('  [' + f.fact_type + '] ' + f.value.substring(0, 80));",
							"    });",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "6. View Classified Clauses",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://127.0.0.1:8742/contracts/{{document_id}}/clauses",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["contracts", "{{document_id}}", "clauses"]
				},
				"description": "View classified clauses — payment, termination, confidentiality, etc."
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Clauses retrieved', function () {",
							"    pm.response.to.have.status(200);",
							"    var clauses = pm.response.json();",
							"    console.log('Found ' + clauses.length + ' clauses:');",
							"    clauses.forEach(function(c) {",
							"        console.log('  [' + c.clause_type + '] ' + c.heading);",
							"    });",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "7. View Resolved Bindings",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://127.0.0.1:8742/contracts/{{document_id}}/bindings",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["contracts", "{{document_id}}", "bindings"]
				},
				"description": "View resolved bindings — definitions and aliases.\nExample: 'Buyer' → 'Alpha Corp'"
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Bindings retrieved', function () {",
							"    pm.response.to.have.status(200);",
							"    var bindings = pm.response.json();",
							"    console.log('Found ' + bindings.length + ' bindings:');",
							"    bindings.forEach(function(b) {",
							"        console.log('  [' + b.binding_type + '] ' + b.term + ' → ' + b.resolves_to.substring(0, 60));",
							"    });",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "8. Check Compliance Gaps",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://127.0.0.1:8742/contracts/{{document_id}}/clauses/gaps",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["contracts", "{{document_id}}", "clauses", "gaps"]
				},
				"description": "Check for missing mandatory facts (e.g., termination clause missing notice_period)."
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Gaps checked', function () {",
							"    pm.response.to.have.status(200);",
							"    var gaps = pm.response.json();",
							"    if (gaps.length === 0) {",
							"        console.log('No compliance gaps found');",
							"    } else {",
							"        console.log(gaps.length + ' missing mandatory facts:');",
							"        gaps.forEach(function(g) {",
							"            console.log('  [' + g.clause_type + '] Missing: ' + g.fact_spec_name);",
							"        });",
							"    }",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "9. View TrustGraph",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://127.0.0.1:8742/contracts/{{document_id}}/graph",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["contracts", "{{document_id}}", "graph"]
				},
				"description": "Get the full TrustGraph — nodes (contract, clauses, facts, bindings) and edges."
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Graph retrieved', function () {",
							"    pm.response.to.have.status(200);",
							"    var g = pm.response.json();",
							"    console.log('TrustGraph: ' + g.title);",
							"    console.log('  Nodes: ' + g.nodes.length + ' | Edges: ' + g.edges.length);",
							"    console.log('  Facts: ' + g.summary.total_facts);",
							"    console.log('  Clauses: ' + g.summary.total_clauses);",
							"    console.log('  Bindings: ' + g.summary.total_bindings);",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "10. ASK — Who are the parties?",
			"request": {
				"method": "POST",
				"header": [
					{"key": "Content-Type", "value": "application/json"}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"question\": \"Who are the parties to this contract?\",\n    \"document_id\": \"{{document_id}}\"\n}"
				},
				"url": {
					"raw": "http://127.0.0.1:8742/query/ask",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["query", "ask"]
				},
				"description": "Ask: Who are the parties?"
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Answer received', function () {",
							"    pm.response.to.have.status(200);",
							"    var body = pm.response.json();",
							"    console.log('Answer: ' + body.answer);",
							"    if (body.confidence) console.log('Confidence: ' + body.confidence.label + ' (' + body.confidence.score + ')');",
							"    if (body.provenance) console.log('Evidence nodes: ' + body.provenance.node_count);",
							"    if (body.generation_time_ms) console.log('Time: ' + body.generation_time_ms + 'ms');",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "11. ASK — What is the contract value?",
			"request": {
				"method": "POST",
				"header": [
					{"key": "Content-Type", "value": "application/json"}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"question\": \"What is the total contract value or price?\",\n    \"document_id\": \"{{document_id}}\"\n}"
				},
				"url": {
					"raw": "http://127.0.0.1:8742/query/ask",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["query", "ask"]
				}
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Answer received', function () {",
							"    pm.response.to.have.status(200);",
							"    var body = pm.response.json();",
							"    console.log('Answer: ' + body.answer);",
							"    if (body.confidence) console.log('Confidence: ' + body.confidence.label);",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "12. ASK — Termination conditions?",
			"request": {
				"method": "POST",
				"header": [
					{"key": "Content-Type", "value": "application/json"}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"question\": \"What are the termination conditions and notice period?\",\n    \"document_id\": \"{{document_id}}\"\n}"
				},
				"url": {
					"raw": "http://127.0.0.1:8742/query/ask",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["query", "ask"]
				}
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Answer received', function () {",
							"    pm.response.to.have.status(200);",
							"    var body = pm.response.json();",
							"    console.log('Answer: ' + body.answer);",
							"    if (body.confidence) console.log('Confidence: ' + body.confidence.label);",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "13. ASK — Governing law?",
			"request": {
				"method": "POST",
				"header": [
					{"key": "Content-Type", "value": "application/json"}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"question\": \"What is the governing law and jurisdiction?\",\n    \"document_id\": \"{{document_id}}\"\n}"
				},
				"url": {
					"raw": "http://127.0.0.1:8742/query/ask",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["query", "ask"]
				}
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Answer received', function () {",
							"    pm.response.to.have.status(200);",
							"    var body = pm.response.json();",
							"    console.log('Answer: ' + body.answer);",
							"    if (body.confidence) console.log('Confidence: ' + body.confidence.label);",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "14. ASK — Liability cap?",
			"request": {
				"method": "POST",
				"header": [
					{"key": "Content-Type", "value": "application/json"}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"question\": \"Is there a cap on liability? What is the maximum liability amount?\",\n    \"document_id\": \"{{document_id}}\"\n}"
				},
				"url": {
					"raw": "http://127.0.0.1:8742/query/ask",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["query", "ask"]
				}
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Answer received', function () {",
							"    pm.response.to.have.status(200);",
							"    var body = pm.response.json();",
							"    console.log('Answer: ' + body.answer);",
							"    if (body.confidence) console.log('Confidence: ' + body.confidence.label);",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "15. ASK — Confidentiality obligations?",
			"request": {
				"method": "POST",
				"header": [
					{"key": "Content-Type", "value": "application/json"}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"question\": \"What are the confidentiality obligations? What information is considered confidential?\",\n    \"document_id\": \"{{document_id}}\"\n}"
				},
				"url": {
					"raw": "http://127.0.0.1:8742/query/ask",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["query", "ask"]
				}
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Answer received', function () {",
							"    pm.response.to.have.status(200);",
							"    var body = pm.response.json();",
							"    console.log('Answer: ' + body.answer);",
							"    if (body.confidence) console.log('Confidence: ' + body.confidence.label);",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "16. ASK — Insurance requirements?",
			"request": {
				"method": "POST",
				"header": [
					{"key": "Content-Type", "value": "application/json"}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"question\": \"Are there any insurance requirements? What types and minimum amounts?\",\n    \"document_id\": \"{{document_id}}\"\n}"
				},
				"url": {
					"raw": "http://127.0.0.1:8742/query/ask",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["query", "ask"]
				}
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Answer received', function () {",
							"    pm.response.to.have.status(200);",
							"    var body = pm.response.json();",
							"    console.log('Answer: ' + body.answer);",
							"    if (body.confidence) console.log('Confidence: ' + body.confidence.label);",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "17. ASK — Your Own Question ✏️",
			"request": {
				"method": "POST",
				"header": [
					{"key": "Content-Type", "value": "application/json"}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"question\": \"EDIT THIS — type your question here\",\n    \"document_id\": \"{{document_id}}\"\n}"
				},
				"url": {
					"raw": "http://127.0.0.1:8742/query/ask",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["query", "ask"]
				},
				"description": "TYPE YOUR OWN QUESTION!\n\nClick the Body tab, edit the 'question' field, and click Send.\n\nExample questions:\n- What are the payment terms?\n- Who is responsible for maintenance?\n- What happens if the supplier fails to deliver?\n- What are the SLA targets?\n- Does this contract cover IT equipment at India offices?\n- What obligations survive termination?\n- What are the data protection requirements?\n- What is the renewal mechanism?"
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Answer received', function () {",
							"    pm.response.to.have.status(200);",
							"    var body = pm.response.json();",
							"    console.log('ANSWER: ' + body.answer);",
							"    console.log('');",
							"    if (body.confidence) {",
							"        console.log('CONFIDENCE: ' + body.confidence.label + ' (' + body.confidence.score + ')');",
							"    }",
							"    if (body.provenance) {",
							"        console.log('PROVENANCE: ' + body.provenance.node_count + ' evidence nodes');",
							"        console.log('  Has facts: ' + body.provenance.has_facts);",
							"        console.log('  Has inferences: ' + body.provenance.has_inferences);",
							"        console.log('  Summary: ' + body.provenance.reasoning_summary);",
							"    }",
							"    if (body.facts_referenced && body.facts_referenced.length > 0) {",
							"        console.log('FACTS REFERENCED: ' + body.facts_referenced.join(', '));",
							"    }",
							"    if (body.generation_time_ms) {",
							"        console.log('TIME: ' + body.generation_time_ms + 'ms');",
							"    }",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "18. Create Workspace",
			"request": {
				"method": "POST",
				"header": [
					{"key": "Content-Type", "value": "application/json"}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\": \"Procurement Review\",\n    \"settings\": {\n        \"default_llm\": \"claude-sonnet\",\n        \"confidence_threshold\": 0.7\n    }\n}"
				},
				"url": {
					"raw": "http://127.0.0.1:8742/workspaces",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["workspaces"]
				}
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Workspace created', function () {",
							"    pm.response.to.have.status(201);",
							"    var body = pm.response.json();",
							"    pm.collectionVariables.set('workspace_id', body.workspace_id);",
							"    console.log('Workspace: ' + body.workspace_id + ' (' + body.name + ')');",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "19. List Workspaces",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://127.0.0.1:8742/workspaces",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["workspaces"]
				}
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Workspaces listed', function () {",
							"    pm.response.to.have.status(200);",
							"    console.log(pm.response.json().length + ' workspace(s)');",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "20. Add Document to Workspace",
			"request": {
				"method": "POST",
				"header": [
					{"key": "Content-Type", "value": "application/json"}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"document_id\": \"{{document_id}}\"\n}"
				},
				"url": {
					"raw": "http://127.0.0.1:8742/workspaces/{{workspace_id}}/documents",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["workspaces", "{{workspace_id}}", "documents"]
				}
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Document added', function () {",
							"    pm.response.to.have.status(204);",
							"    console.log('Document added to workspace');",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "21. Get Workspace Details",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://127.0.0.1:8742/workspaces/{{workspace_id}}",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["workspaces", "{{workspace_id}}"]
				}
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Workspace retrieved', function () {",
							"    pm.response.to.have.status(200);",
							"    var ws = pm.response.json();",
							"    console.log(ws.name + ': ' + ws.indexed_documents.length + ' docs, ' + ws.recent_sessions.length + ' sessions');",
							"});"
						]
					}
				}
			]
		},
		{
			"name": "22. Get Session History",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://127.0.0.1:8742/workspaces/{{workspace_id}}/sessions",
					"protocol": "http",
					"host": ["127.0.0.1"],
					"port": "8742",
					"path": ["workspaces", "{{workspace_id}}", "sessions"]
				}
			},
			"response": [],
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"pm.test('Sessions retrieved', function () {",
							"    pm.response.to.have.status(200);",
							"    var sessions = pm.response.json();",
							"    console.log(sessions.length + ' session(s)');",
							"    sessions.forEach(function(s) {",
							"        console.log('  Q: ' + s.query_text.substring(0, 60));",
							"    });",
							"});"
						]
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "document_id",
			"value": ""
		},
		{
			"key": "workspace_id",
			"value": ""
		}
	]
}
